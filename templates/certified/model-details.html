{% extends "templates/base.html" %}

{% block title %}{{ vendor }} {{ name }} certified with Ubuntu{% endblock %}

{% block meta_description %}
  Hardware that have been certified for use with Ubuntu.
{% endblock meta_description %}

{% block outer_content %}

<style>
.row {
  position: relative;
}

.p-tabs,
.p-tabs__list {
  position: static;
}

.p-tabs__list {
  margin: 0 auto;
}

</style>

<main class="is-paper">

{# djlint: off #}
<section class="u-no-margin--bottom row">
  <section class="p-section--hero">
    <div class="row">
      <div class="col-9 col-start-large-4">
        <h1 class="p-muted-heading">
          <a href="/certified/{{category_pathname}}">{{ category_pathname }}</a> &rsaquo; <a href="/certified/platforms/{{ platform_id }}">{{ platform_name }}</a>
          {% if platform_name != name %}
          &rsaquo; {{ name }}
          {% endif %}
        </h1>
      </div>
    </div>
    <div class="row--25-75-on-large">
      <div class="col">
        <div class="p-section--shallow u-hide--medium u-hide--small">
          {% with category=category %}
            {% include "certified/shared/category-image.html" %}
          {% endwith %}
        </div>
      </div>
      <div class="col">
        <div class="p-section--shallow u-no-padding--bottom">
          <h1 class="u-no-padding--top u-no-margin--bottom">
            {{ vendor }} {{ name }}
          </h1>
          <h2>
            {{ form_factor }} system certified with Ubuntu
          </h2>
          {% if hardware_website %}
          <a class="p-button" href="{{ hardware_website }}" target="blank">Visit the website</a>
          {% endif %}
        </div>
      </div>
    </div>
  </section>
  <div class="row">
    <div class="row">
      <div class="col-9 col-start-large-4">
        <nav class="p-tabs" aria-label="Tabs example">
          <ul class="p-tabs__list">
            {% for release in release_details["releases"]|sort(attribute='version') %}
            <li class="p-tabs__item">
              <button class="p-tabs__link" role="tab" aria-selected="{{ 'true' if loop.first else 'false' }}" aria-controls="tab{{ loop.index }}" id="tab{{ loop.index }}-button" tabindex="{{ '0' if loop.first else '-1' }}">{{ release.version }}</button>
            </li>
            {% endfor %}
          </ul>
        </nav>      
      </div>
    </div>
    
    <div class="row" style="margin-top: 25px;">
      <div class="col-3 u-hide--small u-hide--medium">
        {{ image(url="https://assets.ubuntu.com/v1/d9c2c5bf-ubuntu_certified.png", alt="Logo of the Ubuntu Certified project", width="112", height="157", hi_def=True, loading="auto") | safe }}
      </div>
      <div class="col-9">
      {% for release in release_details["releases"] %}
      <div tabindex="0" role="tabpanel" id="tab{{ loop.index }}" aria-labelledby="tab{{ loop.index }}-button" {% if not loop.first %}hidden="hidden"{% endif %}>
        <p class="p-heading--2 u-no-padding--top">Ubuntu {{ release.version }}</p>
        {% if release.level == "Certified Pre-Install" %}
        <p class="u-no-margin--bottom">
          Pre-installed in some regions with a custom Ubuntu image that takes advantage of the system's hardware features and may include additional software. Standard images of Ubuntu may not work well, or at all.
        </p>
        {% if vendor == "Xilinx" %}
        <p class="u-no-margin--bottom" style="padding-top:1.4rem;">
          <a href="/download/amd" class="p-button">Download</a>
        </p>
        {% endif %}
        {% elif release.level == "Certified" %}
        <p>
          The {{ vendor }} {{ name }} with the components described below has been awarded the status of certified for Ubuntu.
        </p>
        <p class="u-no-margin--bottom">
          <a href="{{ release.download_url }}" class="p-button">Download</a>
        </p>
        {% endif %}

        {% if release.notes %}
        <h3 class="p-muted-heading u-no-margin--bottom">Notes</h3>
        {% for note in release.notes %}
        <p>
          {{ note.comment | replace('\n', '<br />') | safe }}
        </p>
        {% endfor %}
        {% endif %}

        <table aria-label="Software" style="margin-top:1.4rem">
          <tbody>
            {% if release.kernel %}
            <tr>
              <th colspan="3" class="u-text--muted">Kernel</th>
              <td colspan="7">
                {{ release.kernel }}
              </td>
            </tr>
            {% endif %}
            {% if release.bios %}
            <tr>
              <th colspan="3" class="u-text--muted">BIOS</th>
              <td colspan="7">
                {{ release.bios }}
              </td>
            </tr>
            {% endif %}
          </tbody>
        </table>
        <div style="margin-top: 50px;">
          <hr/>
          <h3 class="p-muted-heading">Hardware</h3>
          <table aria-label="Hardware" class="u-no-margin--bottom">
            <tbody>
              {% for hardware_subtitle, values in release["components"].items() %}
              <tr>
                <th colspan="3" class="u-text--muted">{{ hardware_subtitle }}</th>
                <td colspan="7">
                  <ul class="p-list u-no-margin--bottom">
                  {% for value in values %}
                    <li class="p-list__item u-no-padding--top">
                    {{ value.name }}
                    {% if value.bus in ["usb", "pci"] %}
                    {{ value.bus }} ({{ value.identifier }}
                    {% if value.subsystem != '' %}{{ value.subsystem }}{% endif %}
                    )
                    {% endif %}
                    </li>
                  {% endfor %}
                  </ul>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          <hr/>
          <p class="u-sv3">
            <a href="/certified/{{ canonical_id }}/{{ release.version }}">All hardware details &rsaquo;</a>
          </p>
          {% if platform_certified_configuration_count > 1 %}
          <p class="u-sv3">
            <a href="/certified/platforms/{{ platform_id }}">{{ platform_certified_configuration_count - 1 }} more certified {% if platform_certified_configuration_count == 2 %} configuration {% else %} configurations {% endif %} in the {{ platform_name }} platform &rsaquo;</a>
          </p>
          {% endif %}
        </div>
      </div>
      {% endfor %}
      <section class="p-section--deep">
        <hr/>
        <div class="row">
          <div class="col-3">
            <h3 class="p-muted-heading">Issues? Let us know</h3>
          </div>
          <div class="col-6">
            <p>
              If there is an issue with the information for this system,
              <a target="_blank"
                href="https://answers.launchpad.net/ubuntu-certification/+addquestion?field.title=Feedback on the {{ vendor }} {{ name }} ({{ canonical_id }})">please let us know</a>.
            </p>
          </div>
        </div>
      </section>
      </div>
    </div>
  </div>
</section>
{# djlint: on #}

{% if components %}
<section class="row p-section--deep">
  <hr/>
  <div class="u-fixed-width">
    <h2 class="u-sv2">Components certified with this system</h2>
    <table class="p-table--mobile-card p-table-component-devices"
           aria-label="Component Devices table">
      <thead>
        <tr>
          <th>Component</th>
          <th class="u-align--center">18.04 LTS</th>
          <th class="u-align--center">20.04 LTS</th>
          <th class="u-align--center">22.04 LTS</th>
          <th class="u-align--center">24.04 LTS</th>
          <th>Comments</th>
        </tr>
      </thead>
      <tbody>
        {% for component in components %}
        <tr>
          <th aria-label="Component">
            <a href="/certified/component/{{ component.id }}">{{ component.vendor_name }} {{ component.model }}</a>
          </th>
          {% if '18.04 LTS' in component.lts_releases %}
          {% if component.lts_releases['18.04 LTS'][0].third_party_driver %}
          <td data-heading="18.04 LTS">
            {{ image(url="https://assets.ubuntu.com/v1/8dd0626d-3rd-party-icon.svg", alt="May require third-party driver", width="21", height="14", hi_def=True, attrs={"style":"margin-left: 0.45rem;"}, loading="lazy") | safe }}
          </td>
          {% elif component.lts_releases['18.04 LTS'][0].status == 'inprogress' %}
          <td data-heading="18.04 ESM">
            <i class="p-icon--help">In progress</i>
          </td>
          {% elif component.lts_releases['18.04 LTS'][0].status == 'certified' %}
          <td data-heading="18.04 LTS">
            <i class="p-icon--success">Supported</i>
          </td>
          {% endif %}
          {% else %}
          <td data-heading="18.04 LTS"></td>
          {% endif %}
          {% if '20.04 LTS' in component.lts_releases %}
          {% if component.lts_releases['20.04 LTS'][0].third_party_driver %}
          <td data-heading="20.04 LTS">
            {{ image(url="https://assets.ubuntu.com/v1/8dd0626d-3rd-party-icon.svg",alt="May require third-party driver",width="21",height="14",hi_def=True,attrs={"style":"margin-left: 0.45rem;"},loading="lazy") | safe }}
          </td>
          {% elif component.lts_releases['20.04 LTS'][0].status == 'inprogress' %}
          <td data-heading="20.04 ESM">
            <i class="p-icon--help">In progress</i>
          </td>
          {% elif component.lts_releases['20.04 LTS'][0].status == 'certified' %}
          <td data-heading="20.04 LTS">
            <i class="p-icon--success">Supported</i>
          </td>
          {% endif %}
          {% else %}
          <td data-heading="20.04 LTS"></td>
          {% endif %}
          {% if '22.04 LTS' in component.lts_releases %}
          {% if component.lts_releases['22.04 LTS'][0].third_party_driver %}
          <td data-heading="22.04 LTS">
            {{ image(url="https://assets.ubuntu.com/v1/8dd0626d-3rd-party-icon.svg", alt="May require third-party driver", width="21", height="14", hi_def=True, attrs={"style":"margin-left: 0.45rem;"}, loading="lazy") | safe }}
          </td>
          {% elif component.lts_releases['22.04 LTS'][0].status == 'inprogress' %}
          <td data-heading="22.04 ESM">
            <i class="p-icon--help">In progress</i>
          </td>
          {% elif component.lts_releases['22.04 LTS'][0].status == 'certified' %}
          <td data-heading="22.04 LTS">
            <i class="p-icon--success">Supported</i>
          </td>
          {% endif %}
          {% else %}
          <td data-heading="22.04 LTS">
            <i class="p-icon--error"></i>
          </td>
          {% endif %}
          {% if '24.04 LTS' in component.lts_releases %}
          {% if component.lts_releases['24.04 LTS'][0].third_party_driver %}
          <td data-heading="24.04 LTS">
            {{ image(url="https://assets.ubuntu.com/v1/8dd0626d-3rd-party-icon.svg", alt="May require third-party driver", width="21", height="14", hi_def=True, attrs={"style":"margin-left: 0.45rem;"}, loading="lazy") | safe }}
          </td>
          {% elif component.lts_releases['24.04 LTS'][0].status == 'inprogress' %}
          <td data-heading="24.04 ESM">
            <i class="p-icon--help">In progress</i>
          </td>
          {% elif component.lts_releases['24.04 LTS'][0].status == 'certified' %}
          <td data-heading="24.04 LTS">
            <i class="p-icon--success">Supported</i>
          </td>
          {% endif %}
          {% else %}
          <td data-heading="24.04 LTS">
            <i class="p-icon--error"></i>
          </td>
          {% endif %}
          <td data-heading="Comments">{{ component.note }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <ul class="p-inline-list" style="margin-left:0.5rem;">
      <li class="p-inline-list__item">
        <i class="p-icon--success"></i> <small class="p-">Supported</small>
      </li>
      <li class="p-inline-list__item">
        <img src="https://assets.ubuntu.com/v1/8dd0626d-3rd-party-icon.svg" alt="" />
        <small>May require 3rd-party driver</small>
      </li>
      <li class="p-inline-list__item">
        <i class="p-icon--help"></i> <small>In progress</small>
      </li>
    </ul>
  </div>
</section>
{% endif %}

</main>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('.p-tabs__link');
    const panels = document.querySelectorAll('[role="tabpanel"]');

    tabs.forEach(tab => {
      tab.addEventListener('click', function () {
        // Deselect all tabs
        tabs.forEach(t => {
          t.setAttribute('aria-selected', 'false');
          t.setAttribute('tabindex', '-1');
        });

        // Hide all tab panels
        panels.forEach(panel => {
          panel.setAttribute('hidden', 'hidden');
        });

        // Select the clicked tab
        this.setAttribute('aria-selected', 'true');
        this.setAttribute('tabindex', '0');

        // Show the corresponding tab panel
        const panel = document.getElementById(this.getAttribute('aria-controls'));
        panel.removeAttribute('hidden');
      });
    });
  });
</script>

{% endblock %}
